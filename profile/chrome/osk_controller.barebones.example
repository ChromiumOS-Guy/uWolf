// ==UserScript==
// @name         OSK CSS Controller
// @namespace    http://ubuntutouch.com/osk/barebones
// @version      1.1
// @description  Controls the visibility of the OSK bar.
// @include      chrome://browser/content/browser.xhtml
// @run-at       document-end
// ==/UserScript==

(function() {
  const DEBUG_MODE = true; // Set to true to see console logs

  function log(...args) {
    if (DEBUG_MODE) {
      console.log("[OSK CSS Controller]", ...args);
    }
  }

  log("OSK CSS COntroller Script: Initializing...");

  let browserRootElement = null;
  let isOSKShown = true; // Start with the OSK shown

  function toggleOSK() {
    if (!browserRootElement) {
      log("Browser root element not found, cannot toggle OSK.");
      return;
    }

    if (isOSKShown) {
      // Currently shown, so hide it
      browserRootElement.classList.remove('osk-input-focused');
      browserRootElement.classList.add('osk-hidden');
      log("OSK: Hiding (removed 'osk-input-focused', added 'osk-hidden')");
    } else {
      // Currently hidden, so show it
      browserRootElement.classList.remove('osk-hidden');
      browserRootElement.classList.add('osk-input-focused');
      log("OSK: Showing (removed 'osk-hidden', added 'osk-input-focused')");
    }
    isOSKShown = !isOSKShown; // Flip the state
  }



})(); // End of IIFE